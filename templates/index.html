<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if site_settings %}{{ site_settings.site_title }}{% else %}–ú—ñ–π –°–∞–π—Ç{% endif %}</title>
    <meta name="description" content="{% if site_settings %}{{ site_settings.site_description }}{% else %}–ö—Ä–∞—Å–∏–≤–∏–π —Å–∞–π—Ç –∑ —á–æ—Ä–Ω–∏–º —Ñ–æ–Ω–æ–º, –ø–ª–∞–≤–∞—é—á–∏–º–∏ –±—ñ–ª–∏–º–∏ —à–∞—Ä–∞–º–∏ —Ç–∞ —Å—É—á–∞—Å–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º{% endif %}">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
{% if error %}
<!-- –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ–º–∏–ª–∫—É —è–∫—â–æ —î -->
<div style="background: #ff4444; color: white; padding: 20px; text-align: center; font-size: 18px;">
    <strong>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∞–π—Ç—É:</strong> {{ error }}
    <br><small>–ë—É–¥—å –ª–∞—Å–∫–∞, –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–±–æ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.</small>
</div>
{% endif %}

<!-- –ü–ª–∞–≤–∞—é—á—ñ –±—ñ–ª—ñ —à–∞—Ä–∏ -->
<div class="floating-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
    <div class="shape shape-5"></div>
</div>

<!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç—É -->
<header class="header">
    <nav class="navbar">
        <div class="nav-brand">
            <h1>{% if site_settings %}{{ site_settings.site_title }}{% else %}–ö–≤—ñ—Ç–∫–æ–≤–∏–π –º–∞–≥–∞–∑–∏–Ω{% endif %}</h1>
            <button class="b2b-button">{{ site_settings.b2b_button_text|default:"B2B" }}</button>
        </div>
        <div class="nav-actions">
            <div class="cart-icon">
                <span class="cart-icon-symbol">üõí</span>
                <span class="cart-count">0</span>
            </div>
        </div>
    </nav>
</header>

<!-- –ü—Ä–æ–≥—Ä–µ—Å –±–∞—Ä -->
<div class="progress-bar">
    <div class="progress-fill"></div>
</div>

<!-- –ì–æ–ª–æ–≤–Ω–∞ —Å–µ–∫—Ü—ñ—è –∑ —Ç–æ–≤–∞—Ä–æ–º -->
<section id="home" class="section hero-section">
    <div class="product-container">
        <div class="product-gallery">
            <div class="product-image-container">
                {% if main_product and main_product.show_premium_label %}
                <div class="product-label">{{ main_product.premium_label_text|default:"‚≠ê –ü—Ä–µ–º—ñ—É–º —è–∫—ñ—Å—Ç—å" }}</div>
                {% endif %}
                <div class="image-gallery">
                    {% if color_options %}
                        {% for color in color_options %}
                            {% if color.is_active and color.image_url and forloop.first %}
                                <img id="product-image" src="{{ color.image_url }}" alt="–¢–æ–≤–∞—Ä" class="product-image" loading="lazy">
                            {% endif %}
                        {% empty %}
                            <img id="product-image" src="{% static 'images/IMG_1243.PNG' %}" alt="–¢–æ–≤–∞—Ä" class="product-image" loading="lazy">
                        {% endfor %}
                    {% else %}
                        <img id="product-image" src="{% static 'images/IMG_1243.PNG' %}" alt="–¢–æ–≤–∞—Ä" class="product-image" loading="lazy">
                    {% endif %}
                    <div class="image-nav">
                        <button class="nav-btn prev-btn" onclick="changeImage(-1)">‚Äπ</button>
                        <button class="nav-btn next-btn" onclick="changeImage(1)">‚Ä∫</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-info">
            <h2 class="product-title">{% if main_product %}{{ main_product.title }}{% else %}–ü—Ä–µ–º—ñ—É–º —Ç–æ–≤–∞—Ä{% endif %}</h2>
            {% if color_options %}
            <div class="color-selector">
                <h3>{{ site_settings.color_selector_title|default:"–∫–æ–ª—ñ—Ä –ø–∞–∫—É–≤–∞–Ω–Ω—è" }}</h3>
                <div class="color-dots">
                    {% for color in color_options %}
                        {% if color.is_active and color.image_url %}
                        <div class="color-dot {% if forloop.first %}active{% endif %}" 
                             data-color="{{ color.name|lower }}" 
                             data-image="{{ color.image_url }}"
                             style="background-color: {{ color.hex_code }};"
                             title="{{ color.name }}">
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            {% if quantity_options %}
            <div class="quantity-selector">
                <h3>{{ site_settings.quantity_selector_title|default:"–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–≤—ñ—Ç—ñ–≤" }}</h3>
                <div class="quantity-buttons">
                    {% for qty in quantity_options %}
                        {% if qty.is_active %}
                        <button class="quantity-btn {% if forloop.first %}active{% endif %}" 
                                data-quantity="{{ qty.quantity }}" 
                                data-price-per-unit="{{ qty.price_per_unit }}" 
                                data-currency="–≥—Ä–Ω">
                            {{ qty.quantity }}
                        </button>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            {% if main_product %}
            <div class="product-price-container">
                <div class="product-price current-price" data-base-price="0" data-currency="{{ main_product.currency }}">
                    {% if quantity_options %}
                        {% with first_qty=quantity_options.0 %}
                            {% if first_qty.price_per_unit and first_qty.quantity %}
                                <span class="final-price">0</span> {{ main_product.currency }}
                            {% else %}
                                0 {{ main_product.currency }}
                            {% endif %}
                        {% endwith %}
                    {% else %}
                        0 {{ main_product.currency }}
                    {% endif %}
                </div>
                <button class="add-to-cart-btn" id="cart-button" onclick="toggleCart()">
                    {{ main_product.add_to_cart_text|default:"–í –∫–æ—à–∏–∫" }}
                </button>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- –°–µ–∫—Ü—ñ—è "–ü—Ä–æ –Ω–∞—Å" -->
{% if about_section and about_section.show_section %}
<section id="about" class="section about-section">
    <div class="about-content">
        <h2 class="section-title">{{ about_section.title }}</h2>
        <p class="about-description">{{ about_section.description }}</p>
    </div>
</section>
{% endif %}

<!-- –°–µ–∫—Ü—ñ—è "–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–æ–≤–∞—Ä–∏" -->
{% if additional_settings and additional_settings.show_section %}
<section id="additional-products" class="section additional-products-section">
    <div class="additional-products-content">
        <div class="additional-products-header">
            <h2 class="section-title">{{ additional_settings.section_title|default:"–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–æ–≤–∞—Ä–∏" }}</h2>
            <button class="add-all-btn" onclick="toggleAllAdditionalProducts()">{{ additional_settings.add_all_text|default:"–î–æ–¥–∞—Ç–∏ –≤—Å—ñ" }}</button>
        </div>
        <div class="additional-products-grid">
            {% if additional_products %}
                {% for product in additional_products %}
                    {% if product.image or product.image_url %}
                    <div class="additional-product-card" data-product-id="{{ product.id }}">
                        <div class="additional-product-image">
                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.title }}" loading="lazy">
                            {% elif product.image_url %}
                                <img src="{{ product.image_url }}" alt="{{ product.title }}" loading="lazy">
                            {% endif %}
                            <div class="product-status">–í –∫–æ—à–∏–∫—É</div>
                        </div>
                        <div class="additional-product-info">
                            <h3>{{ product.title }}</h3>
                            {% if product.description %}
                            <p class="product-description">{{ product.description|truncatechars:100 }}</p>
                            {% endif %}
                            <div class="additional-product-price-container">
                                <div class="additional-product-price">{{ product.price }} {{ product.currency }}</div>
                                <button class="additional-add-to-cart-btn" onclick="toggleAdditionalProduct({{ product.id }})">{{ product.add_to_cart_text }}</button>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- –í—Å–ø–ª–∏–≤–∞—é—á–µ –≤—ñ–∫–Ω–æ –∫–æ—à–∏–∫–∞ -->
<div id="cart-popup" class="cart-popup">
    <div class="cart-popup-content">
        <div class="cart-popup-header">
            <h3>–ö–æ—à–∏–∫</h3>
            <button class="close-cart-btn" onclick="closeCart()">√ó</button>
        </div>
        <div class="cart-popup-body">
            <div id="cart-items" class="cart-items">
                <!-- –¢–æ–≤–∞—Ä–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏—Å—å —Ç—É—Ç -->
            </div>
            <div class="cart-total">
                <div class="total-price">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="total-amount">0</span> –≥—Ä–Ω</div>
                <button class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            </div>
        </div>
    </div>
</div>

<!-- –°–µ–∫—Ü—ñ—è –ø–æ—Å–ª—É–≥ -->
{% if services %}
<section id="services" class="section services-section">
    <div class="services-content">
        <h2 class="section-title">–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏</h2>
        <div class="services-grid">
            {% for service in services %}
            <div class="service-card">
                <div class="service-icon">{{ service.icon }}</div>
                <h3>{{ service.title }}</h3>
                <p>{{ service.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- –°–µ–∫—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ -->
{% if contact_info %}
<section id="contact" class="section contact-section">
    <div class="contact-content">
        <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
        <div class="contact-info">
            <div class="contact-item">
                <i class="fas fa-phone"></i>
                <span>{{ contact_info.phone }}</span>
            </div>
            <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <span>{{ contact_info.email }}</span>
            </div>
            {% if contact_info.address %}
            <div class="contact-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ contact_info.address }}</span>
            </div>
            {% endif %}
            {% if contact_info.working_hours %}
            <div class="contact-item">
                <i class="fas fa-clock"></i>
                <span>{{ contact_info.working_hours }}</span>
            </div>
            {% endif %}
        </div>
        
        {% if contact_info.instagram or contact_info.facebook or contact_info.telegram %}
        <div class="social-links">
            {% if contact_info.instagram %}
            <a href="{{ contact_info.instagram }}" target="_blank" class="social-link">
                <i class="fab fa-instagram"></i>
            </a>
            {% endif %}
            {% if contact_info.facebook %}
            <a href="{{ contact_info.facebook }}" target="_blank" class="social-link">
                <i class="fab fa-facebook"></i>
            </a>
            {% endif %}
            {% if contact_info.telegram %}
            <a href="{{ contact_info.telegram }}" target="_blank" class="social-link">
                <i class="fab fa-telegram"></i>
            </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% endif %}

    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>